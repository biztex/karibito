# Gitの運用ルール

⚠️ 必ずブランチを切ってからコミットすること！

## ブランチの種類

```
main：最終的な本番環境（現未作成）

main_pre_release_user：事前ユーザー登録本番環境（現本番環境）

main_pre_release_product：事前案件登録本番環境（現未作成）

stage：stg環境ブランチ（トエビス様確認用、基本的に現状の本番環境と同等にする）

develop：dev環境ブランチ（デフォルトブランチ、最新）

feature_：作業ブランチ
```

## 運用ルール

プレリリースの段階では、最新のdevelopブランチと本番環境のmain_pre_release_userブランチの２つがパラレルに存在します。

- 本番環境に反映させない場合の流れ

```
1. developブランチからfeatureブランチを切り作業する。
2. 実装完了後、developブランチにプルリクエストを作成する。
3. レビュアーがレビューし、問題なければdevelopにマージし、featureブランチを削除する。
```

- 本番環境に反映させる場合

```
1. stageブランチからfeatureブランチを切り作業する。
2. 実装完了後、stageブランチにプルリクエストを作成する。
3. レビュアーがレビューし、問題なければstageにマージし、featureブランチを削除する。
4. stg環境にデプロイし、動作確認を行う。
5. 動作確認が問題なければ、stageからmain_pre_release_userにプルリクを作成し、マージする（stageブランチは消さないように注意）。
6. developにも反映させたい場合は別途「本番環境に反映させない場合の流れ」も必要。
```

- 作業ブランチ名は `_` で繋いで作成する

```
例）faeture_login
```


## コミット

コミットに関してはコミット履歴をあまり見ないため一旦ルールなし  
したい時にする  
(ルールが必要であれば追記する)


## プルリク作成のルール

プルリクは一度に多くの機能を盛り込まないこと（レビューが大変になるため）。  
ブランチは適切に分けるようにする（例：CRUDならC,R,U,Dごとに出す）。

プルリクのタイトルには機能名などを書く（例：サービス登録機能、利用規約画面組み込み）

説明欄には必ず以下の内容を記述すること

- 機能に関する説明
- その他動作確認のURLや注意点などあれば補足に書く（必要であればキャプチャも貼る）


（例 テンプレート

```
# 概要

# 補足
```


## レビュー手順

- GitHub のプルリク画面から Reviewers に担当者を設定する
- 時間が経ってもレビューされない場合は気づいていない場合があるため、Slackで催促する（プルリク作成時でもOK）

## その他

- レビュアーでなくても他の方のプルリクを見てみるのも重要です。何か気づいた点があればコメントしてあげてください。
- 上記のルールも変更が必要なときはご意見いただければと思います。いいルールにしていきましょう。
